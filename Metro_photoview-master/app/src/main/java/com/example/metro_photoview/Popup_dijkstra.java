package com.example.metro_photoview;

import android.app.Activity;
import android.app.Dialog;
import android.content.Intent;
import android.view.View;

import android.view.Window;
import android.widget.Button;
import android.content.Context;

import android.os.Bundle;
import android.widget.ImageView;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.TextView;
import android.widget.Toast;

import androidx.annotation.IdRes;
import androidx.annotation.NonNull;
import androidx.appcompat.app.AppCompatActivity;

import com.bumptech.glide.Glide;


public class Popup_dijkstra extends Activity implements View.OnClickListener  {

    private Context mContext;

    private TextView btn_cancel;
    private TextView btn_ok;
    private TextView depart_view;
    private TextView dest_view;
    private TextView route_view;
    private String depart;
    private String dest;
    private String route;
    private String dijkstra_value;
    private TextView value; // 최단거리/비용/시간
    private RadioGroup radioGroup;
    private RadioButton mode1,mode2,mode3;
    private ImageView loading;

    private int mode;

    @Override

    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.popup_dijkstra);
        getWindow().setBackgroundDrawableResource(android.R.color.white);

        btn_cancel = (TextView)findViewById(R.id.btn_cancel2);
        depart_view = (TextView)findViewById(R.id.depart);
        dest_view = (TextView)findViewById(R.id.dest);
        route_view = (TextView)findViewById(R.id.route);
        value = (TextView)findViewById(R.id.dijk_value);
        loading = (ImageView)findViewById(R.id.loading);

        radioGroup = (RadioGroup)findViewById(R.id.radioGroup1);
        radioGroup.setOnCheckedChangeListener(radioGroupButtonChangeListener);

        btn_cancel.setOnClickListener(this);

        Glide.with(this).load(R.drawable.giphy).into(loading);

        Intent intent = getIntent();

        depart = Integer.toString(intent.getExtras().getInt("depart"));
        dest = Integer.toString(intent.getExtras().getInt("dest"));

        depart_view.setText("출발역\n" + depart);
        dest_view.setText("도착역\n" + dest);


    }

    @Override

    public void onClick(View v) {
        switch (v.getId()) {
            case R.id.btn_cancel2:
                //dismiss();
                finish();
                break;

            /*case R.id.btn_ok:
                //((MainActivity) mContext).finish(); 앱 종료버튼
                break;*/
        }
    }



    RadioGroup.OnCheckedChangeListener radioGroupButtonChangeListener = new RadioGroup.OnCheckedChangeListener() { // 라디오버튼 리스너니까 신경x

        @Override
        public void onCheckedChanged(RadioGroup radioGroup, @IdRes int i) { // 시간
            if(i == R.id.mode1){

                Dijkstra d = new Dijkstra(111,1);

                d.input("101","102", 200, 500, 200); // 가중치 주입
                d.input("102","103", 300, 400, 300);
                d.input("103","104", 1000, 600, 500);
                d.input("104","105", 500, 200, 340);
                d.input("105","106", 150, 600, 450);
                d.input("106","107", 320, 200, 120);
                d.input("107","108", 400, 700, 650);
                d.input("108","109", 800, 350, 200);
                d.input("109","110", 900, 250, 430);
                d.input("110","111", 500, 650, 120);
                d.input("111","112", 1000, 400, 890);
                d.input("112","113", 2000, 500, 800);
                d.input("113","114", 500, 500, 700);
                d.input("114","115", 220, 400, 540);
                d.input("115","116", 230, 600, 330);
                d.input("116","117", 300, 200, 280);
                d.input("117","118", 500, 600, 800);
                d.input("118","119", 480, 200, 1000);
                d.input("119","120", 500, 700, 2000);
                d.input("120","121", 400, 350, 700);
                d.input("121","122", 900, 250, 650);
                d.input("122","123", 300, 650, 440);
                d.input("123","101", 480, 400, 200);
                d.input("101","201", 1000, 500, 300);
                d.input("201","202", 250, 500, 500);
                d.input("202","203", 480, 400, 340);
                d.input("203","204", 400, 600, 450);
                d.input("204","205", 250, 200, 120);
                d.input("205","206", 500, 600, 650);
                d.input("206","207", 320, 200, 200);
                d.input("207","208", 250, 700, 430);
                d.input("208","209", 300, 350, 120);
                d.input("209","210", 150, 250, 890);
                d.input("210","211", 900, 650, 800);
                d.input("211","212", 320, 400, 700);
                d.input("212","213", 150, 500, 540);
                d.input("213","214", 500, 500, 330);
                d.input("214","215", 210, 400, 280);
                d.input("215","216", 150, 600, 800);
                d.input("216","217", 500, 200, 1000);
                d.input("207","301", 300, 600, 2000);
                d.input("301","302", 300, 200, 700);
                d.input("302","303", 480, 700, 650);
                d.input("303","304", 400, 350, 440);
                d.input("304","123", 250, 250, 200);
                d.input("123","305", 300, 650, 300);
                d.input("305","306", 250, 400, 500);
                d.input("306","307", 900, 500, 340);
                d.input("307","308", 480, 500, 450);
                d.input("308","107", 400, 400, 120);
                d.input("104","401", 1000, 600, 650);
                d.input("401","307", 150, 200, 200);
                d.input("307","402", 300, 600, 430);
                d.input("402","403", 210, 200, 120);
                d.input("403","404", 320, 700, 890);
                d.input("404","405", 210, 350, 800);
                d.input("405","406", 500, 250, 700);
                d.input("406","407", 300, 650, 540);
                d.input("407","115", 320, 400, 330);
                d.input("115","408", 480, 500, 280);
                d.input("408","409", 300, 340, 800);
                d.input("409","410", 480, 500, 1000);
                d.input("410","411", 300, 400, 2000);
                d.input("411","412", 900, 600, 700);
                d.input("412","413", 400, 200, 650);
                d.input("413","414", 430, 600, 440);
                d.input("414","415", 150, 200, 200);
                d.input("415","416", 1000, 700, 300);
                d.input("416","417", 500, 350, 500);
                d.input("417","216", 900, 250, 340);
                d.input("209","501", 320, 650, 450);
                d.input("501","502", 320, 400, 120);
                d.input("502","503", 430, 500, 650);
                d.input("503","504", 210, 500, 200);
                d.input("504","122", 320, 400, 430);
                d.input("122","505", 480, 600, 120);
                d.input("505","506", 300, 200, 890);
                d.input("506","403", 320, 600, 800);
                d.input("403","507", 300, 200, 700);
                d.input("507","109", 1000, 700, 540);
                d.input("601","602", 150, 350, 330);
                d.input("602","121", 700, 250, 280);
                d.input("121","603", 500, 650, 800);
                d.input("603","604", 300, 400, 1000);
                d.input("604","605", 430, 200, 2000);
                d.input("605","606", 480, 300, 700);
                d.input("606","116", 320, 400, 650);
                d.input("116","607", 250, 200, 440);
                d.input("607","608", 500, 600, 200);
                d.input("608","609", 700, 200, 300);
                d.input("609","412", 320, 700, 500);
                d.input("412","610", 1000, 350, 340);
                d.input("610","611", 700, 250, 450);
                d.input("611","612", 700, 650, 120);
                d.input("612","613", 150, 400, 650);
                d.input("613","614", 430, 200, 200);
                d.input("614","615", 500, 300, 430);
                d.input("615","616", 700, 400, 120);
                d.input("616","417", 480, 200, 890);
                d.input("417","617", 320, 600, 800);
                d.input("617","618", 300, 200, 700);
                d.input("618","619", 250, 700, 540);
                d.input("619","620", 700, 350, 330);
                d.input("620","621", 320, 250, 280);
                d.input("621","622", 480, 650, 800);
                d.input("622","601", 150, 400, 1000);
                d.input("202","303", 1000, 200, 2000);
                d.input("303","503", 700, 300, 700);
                d.input("503","601", 500, 400, 650);
                d.input("601","701", 430, 200, 440);
                d.input("701","702", 150, 600, 200);
                d.input("702","703", 600, 200, 300);
                d.input("703","704", 700, 700, 500);
                d.input("704","705", 250, 350, 340);
                d.input("705","706", 600, 250, 450);
                d.input("706","416", 300, 650, 120);
                d.input("416","707", 430, 400, 650);
                d.input("707","614", 480, 200, 200);
                d.input("113","801", 600, 300, 430);
                d.input("801","802",1000, 400, 120);
                d.input("802","803", 700, 200, 890);
                d.input("803","409", 600, 600, 800);
                d.input("409","608", 500, 200, 700);
                d.input("608","804", 700, 700, 540);
                d.input("804","805", 150, 350, 330);
                d.input("805","806", 210, 250, 280);
                d.input("806","705", 600, 650, 800);
                d.input("705","618", 250, 400, 1000);
                d.input("618","214", 700, 200, 2000);
                d.input("112","901", 600, 300, 700);
                d.input("901","406", 300, 400, 650);
                d.input("406","605", 210, 200, 440);
                d.input("605","902", 480, 600, 280);
                d.input("902","119", 430, 200, 800);
                d.input("119","903", 1000, 700, 1000);
                d.input("903","702", 150, 350, 2000);
                d.input("702","904", 500, 250, 700);
                d.input("904","621", 250, 650, 650);
                d.input("621","211", 300, 400, 440);


                route_view.setText("최단경로\n\n"+d.algorithm(depart,dest));
                dijkstra_value = Integer.toString(d.getValue());
                value.setText("최소시간 : "+dijkstra_value);
            }
            else if(i == R.id.mode2){ // 거리

                Dijkstra d = new Dijkstra(111,2);

                d.input("101","102", 200, 500, 200); // 가중치 주입
                d.input("102","103", 300, 400, 300);
                d.input("103","104", 1000, 600, 500);
                d.input("104","105", 500, 200, 340);
                d.input("105","106", 150, 600, 450);
                d.input("106","107", 320, 200, 120);
                d.input("107","108", 400, 700, 650);
                d.input("108","109", 800, 350, 200);
                d.input("109","110", 900, 250, 430);
                d.input("110","111", 500, 650, 120);
                d.input("111","112", 1000, 400, 890);
                d.input("112","113", 2000, 500, 800);
                d.input("113","114", 500, 500, 700);
                d.input("114","115", 220, 400, 540);
                d.input("115","116", 230, 600, 330);
                d.input("116","117", 300, 200, 280);
                d.input("117","118", 500, 600, 800);
                d.input("118","119", 480, 200, 1000);
                d.input("119","120", 500, 700, 2000);
                d.input("120","121", 400, 350, 700);
                d.input("121","122", 900, 250, 650);
                d.input("122","123", 300, 650, 440);
                d.input("123","101", 480, 400, 200);
                d.input("101","201", 1000, 500, 300);
                d.input("201","202", 250, 500, 500);
                d.input("202","203", 480, 400, 340);
                d.input("203","204", 400, 600, 450);
                d.input("204","205", 250, 200, 120);
                d.input("205","206", 500, 600, 650);
                d.input("206","207", 320, 200, 200);
                d.input("207","208", 250, 700, 430);
                d.input("208","209", 300, 350, 120);
                d.input("209","210", 150, 250, 890);
                d.input("210","211", 900, 650, 800);
                d.input("211","212", 320, 400, 700);
                d.input("212","213", 150, 500, 540);
                d.input("213","214", 500, 500, 330);
                d.input("214","215", 210, 400, 280);
                d.input("215","216", 150, 600, 800);
                d.input("216","217", 500, 200, 1000);
                d.input("207","301", 300, 600, 2000);
                d.input("301","302", 300, 200, 700);
                d.input("302","303", 480, 700, 650);
                d.input("303","304", 400, 350, 440);
                d.input("304","123", 250, 250, 200);
                d.input("123","305", 300, 650, 300);
                d.input("305","306", 250, 400, 500);
                d.input("306","307", 900, 500, 340);
                d.input("307","308", 480, 500, 450);
                d.input("308","107", 400, 400, 120);
                d.input("104","401", 1000, 600, 650);
                d.input("401","307", 150, 200, 200);
                d.input("307","402", 300, 600, 430);
                d.input("402","403", 210, 200, 120);
                d.input("403","404", 320, 700, 890);
                d.input("404","405", 210, 350, 800);
                d.input("405","406", 500, 250, 700);
                d.input("406","407", 300, 650, 540);
                d.input("407","115", 320, 400, 330);
                d.input("115","408", 480, 500, 280);
                d.input("408","409", 300, 340, 800);
                d.input("409","410", 480, 500, 1000);
                d.input("410","411", 300, 400, 2000);
                d.input("411","412", 900, 600, 700);
                d.input("412","413", 400, 200, 650);
                d.input("413","414", 430, 600, 440);
                d.input("414","415", 150, 200, 200);
                d.input("415","416", 1000, 700, 300);
                d.input("416","417", 500, 350, 500);
                d.input("417","216", 900, 250, 340);
                d.input("209","501", 320, 650, 450);
                d.input("501","502", 320, 400, 120);
                d.input("502","503", 430, 500, 650);
                d.input("503","504", 210, 500, 200);
                d.input("504","122", 320, 400, 430);
                d.input("122","505", 480, 600, 120);
                d.input("505","506", 300, 200, 890);
                d.input("506","403", 320, 600, 800);
                d.input("403","507", 300, 200, 700);
                d.input("507","109", 1000, 700, 540);
                d.input("601","602", 150, 350, 330);
                d.input("602","121", 700, 250, 280);
                d.input("121","603", 500, 650, 800);
                d.input("603","604", 300, 400, 1000);
                d.input("604","605", 430, 200, 2000);
                d.input("605","606", 480, 300, 700);
                d.input("606","116", 320, 400, 650);
                d.input("116","607", 250, 200, 440);
                d.input("607","608", 500, 600, 200);
                d.input("608","609", 700, 200, 300);
                d.input("609","412", 320, 700, 500);
                d.input("412","610", 1000, 350, 340);
                d.input("610","611", 700, 250, 450);
                d.input("611","612", 700, 650, 120);
                d.input("612","613", 150, 400, 650);
                d.input("613","614", 430, 200, 200);
                d.input("614","615", 500, 300, 430);
                d.input("615","616", 700, 400, 120);
                d.input("616","417", 480, 200, 890);
                d.input("417","617", 320, 600, 800);
                d.input("617","618", 300, 200, 700);
                d.input("618","619", 250, 700, 540);
                d.input("619","620", 700, 350, 330);
                d.input("620","621", 320, 250, 280);
                d.input("621","622", 480, 650, 800);
                d.input("622","601", 150, 400, 1000);
                d.input("202","303", 1000, 200, 2000);
                d.input("303","503", 700, 300, 700);
                d.input("503","601", 500, 400, 650);
                d.input("601","701", 430, 200, 440);
                d.input("701","702", 150, 600, 200);
                d.input("702","703", 600, 200, 300);
                d.input("703","704", 700, 700, 500);
                d.input("704","705", 250, 350, 340);
                d.input("705","706", 600, 250, 450);
                d.input("706","416", 300, 650, 120);
                d.input("416","707", 430, 400, 650);
                d.input("707","614", 480, 200, 200);
                d.input("113","801", 600, 300, 430);
                d.input("801","802",1000, 400, 120);
                d.input("802","803", 700, 200, 890);
                d.input("803","409", 600, 600, 800);
                d.input("409","608", 500, 200, 700);
                d.input("608","804", 700, 700, 540);
                d.input("804","805", 150, 350, 330);
                d.input("805","806", 210, 250, 280);
                d.input("806","705", 600, 650, 800);
                d.input("705","618", 250, 400, 1000);
                d.input("618","214", 700, 200, 2000);
                d.input("112","901", 600, 300, 700);
                d.input("901","406", 300, 400, 650);
                d.input("406","605", 210, 200, 440);
                d.input("605","902", 480, 600, 280);
                d.input("902","119", 430, 200, 800);
                d.input("119","903", 1000, 700, 1000);
                d.input("903","702", 150, 350, 2000);
                d.input("702","904", 500, 250, 700);
                d.input("904","621", 250, 650, 650);
                d.input("621","211", 300, 400, 440);

                route_view.setText("최단경로\n\n"+d.algorithm(depart,dest));
                dijkstra_value = Integer.toString(d.getValue());
                value.setText("최단거리 : "+dijkstra_value);

            }
            if(i == R.id.mode3) { // 비용

                Dijkstra d = new Dijkstra(111,3);

                d.input("101","102", 200, 500, 200); // 가중치 주입
                d.input("102","103", 300, 400, 300);
                d.input("103","104", 1000, 600, 500);
                d.input("104","105", 500, 200, 340);
                d.input("105","106", 150, 600, 450);
                d.input("106","107", 320, 200, 120);
                d.input("107","108", 400, 700, 650);
                d.input("108","109", 800, 350, 200);
                d.input("109","110", 900, 250, 430);
                d.input("110","111", 500, 650, 120);
                d.input("111","112", 1000, 400, 890);
                d.input("112","113", 2000, 500, 800);
                d.input("113","114", 500, 500, 700);
                d.input("114","115", 220, 400, 540);
                d.input("115","116", 230, 600, 330);
                d.input("116","117", 300, 200, 280);
                d.input("117","118", 500, 600, 800);
                d.input("118","119", 480, 200, 1000);
                d.input("119","120", 500, 700, 2000);
                d.input("120","121", 400, 350, 700);
                d.input("121","122", 900, 250, 650);
                d.input("122","123", 300, 650, 440);
                d.input("123","101", 480, 400, 200);
                d.input("101","201", 1000, 500, 300);
                d.input("201","202", 250, 500, 500);
                d.input("202","203", 480, 400, 340);
                d.input("203","204", 400, 600, 450);
                d.input("204","205", 250, 200, 120);
                d.input("205","206", 500, 600, 650);
                d.input("206","207", 320, 200, 200);
                d.input("207","208", 250, 700, 430);
                d.input("208","209", 300, 350, 120);
                d.input("209","210", 150, 250, 890);
                d.input("210","211", 900, 650, 800);
                d.input("211","212", 320, 400, 700);
                d.input("212","213", 150, 500, 540);
                d.input("213","214", 500, 500, 330);
                d.input("214","215", 210, 400, 280);
                d.input("215","216", 150, 600, 800);
                d.input("216","217", 500, 200, 1000);
                d.input("207","301", 300, 600, 2000);
                d.input("301","302", 300, 200, 700);
                d.input("302","303", 480, 700, 650);
                d.input("303","304", 400, 350, 440);
                d.input("304","123", 250, 250, 200);
                d.input("123","305", 300, 650, 300);
                d.input("305","306", 250, 400, 500);
                d.input("306","307", 900, 500, 340);
                d.input("307","308", 480, 500, 450);
                d.input("308","107", 400, 400, 120);
                d.input("104","401", 1000, 600, 650);
                d.input("401","307", 150, 200, 200);
                d.input("307","402", 300, 600, 430);
                d.input("402","403", 210, 200, 120);
                d.input("403","404", 320, 700, 890);
                d.input("404","405", 210, 350, 800);
                d.input("405","406", 500, 250, 700);
                d.input("406","407", 300, 650, 540);
                d.input("407","115", 320, 400, 330);
                d.input("115","408", 480, 500, 280);
                d.input("408","409", 300, 340, 800);
                d.input("409","410", 480, 500, 1000);
                d.input("410","411", 300, 400, 2000);
                d.input("411","412", 900, 600, 700);
                d.input("412","413", 400, 200, 650);
                d.input("413","414", 430, 600, 440);
                d.input("414","415", 150, 200, 200);
                d.input("415","416", 1000, 700, 300);
                d.input("416","417", 500, 350, 500);
                d.input("417","216", 900, 250, 340);
                d.input("209","501", 320, 650, 450);
                d.input("501","502", 320, 400, 120);
                d.input("502","503", 430, 500, 650);
                d.input("503","504", 210, 500, 200);
                d.input("504","122", 320, 400, 430);
                d.input("122","505", 480, 600, 120);
                d.input("505","506", 300, 200, 890);
                d.input("506","403", 320, 600, 800);
                d.input("403","507", 300, 200, 700);
                d.input("507","109", 1000, 700, 540);
                d.input("601","602", 150, 350, 330);
                d.input("602","121", 700, 250, 280);
                d.input("121","603", 500, 650, 800);
                d.input("603","604", 300, 400, 1000);
                d.input("604","605", 430, 200, 2000);
                d.input("605","606", 480, 300, 700);
                d.input("606","116", 320, 400, 650);
                d.input("116","607", 250, 200, 440);
                d.input("607","608", 500, 600, 200);
                d.input("608","609", 700, 200, 300);
                d.input("609","412", 320, 700, 500);
                d.input("412","610", 1000, 350, 340);
                d.input("610","611", 700, 250, 450);
                d.input("611","612", 700, 650, 120);
                d.input("612","613", 150, 400, 650);
                d.input("613","614", 430, 200, 200);
                d.input("614","615", 500, 300, 430);
                d.input("615","616", 700, 400, 120);
                d.input("616","417", 480, 200, 890);
                d.input("417","617", 320, 600, 800);
                d.input("617","618", 300, 200, 700);
                d.input("618","619", 250, 700, 540);
                d.input("619","620", 700, 350, 330);
                d.input("620","621", 320, 250, 280);
                d.input("621","622", 480, 650, 800);
                d.input("622","601", 150, 400, 1000);
                d.input("202","303", 1000, 200, 2000);
                d.input("303","503", 700, 300, 700);
                d.input("503","601", 500, 400, 650);
                d.input("601","701", 430, 200, 440);
                d.input("701","702", 150, 600, 200);
                d.input("702","703", 600, 200, 300);
                d.input("703","704", 700, 700, 500);
                d.input("704","705", 250, 350, 340);
                d.input("705","706", 600, 250, 450);
                d.input("706","416", 300, 650, 120);
                d.input("416","707", 430, 400, 650);
                d.input("707","614", 480, 200, 200);
                d.input("113","801", 600, 300, 430);
                d.input("801","802",1000, 400, 120);
                d.input("802","803", 700, 200, 890);
                d.input("803","409", 600, 600, 800);
                d.input("409","608", 500, 200, 700);
                d.input("608","804", 700, 700, 540);
                d.input("804","805", 150, 350, 330);
                d.input("805","806", 210, 250, 280);
                d.input("806","705", 600, 650, 800);
                d.input("705","618", 250, 400, 1000);
                d.input("618","214", 700, 200, 2000);
                d.input("112","901", 600, 300, 700);
                d.input("901","406", 300, 400, 650);
                d.input("406","605", 210, 200, 440);
                d.input("605","902", 480, 600, 280);
                d.input("902","119", 430, 200, 800);
                d.input("119","903", 1000, 700, 1000);
                d.input("903","702", 150, 350, 2000);
                d.input("702","904", 500, 250, 700);
                d.input("904","621", 250, 650, 650);
                d.input("621","211", 300, 400, 440);

                route_view.setText("최단경로\n\n"+d.algorithm(depart,dest));
                dijkstra_value = Integer.toString(d.getValue());
                value.setText("최저비용 : "+dijkstra_value);

            }
        }
    };


}




